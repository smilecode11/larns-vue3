{"remainingRequest":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/ProxyDemo.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/ProxyDemo.vue","mtime":1639026951100},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_ts-loader@8.2.0@ts-loader/index.js","mtime":499162500000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCwgcmVhY3RpdmUgfSBmcm9tICJ2dWUiOwpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoewogIG5hbWU6ICJwcm94eS1kZW1vIiwKICBzZXR1cCgpIHsKICAgIC8vICDlrprkuYnlr7nosaEgcGVyc29uCiAgICBjb25zdCBwZXJzb24gPSByZWFjdGl2ZSh7CiAgICAgIG5hbWU6ICJDaGVuIHhpbiIsCiAgICB9KTsKCiAgICAvLyAgUmVmbGVjdC5nZXQg5Ye95pWw5Y+W5YC8LCBSZWZsZWN0LnNldCDlh73mlbDlvaLlvI/orr7nva7lgLwsIOS4uiBQcm94eSDlrp7kvosgaGFuZGxlciDlr7nosaEg6YeP6Lqr5a6a5YGaCiAgICBjb25zb2xlLmxvZygnUmVmbGVjdC5nZXQocGVyc29uLCAibmFtZSIpIC0+ICcsIFJlZmxlY3QuZ2V0KHBlcnNvbiwgIm5hbWUiKSk7CiAgICBSZWZsZWN0LnNldChwZXJzb24sICJuYW1lIiwgIkNoZW4gWGluIik7CgogICAgLy8gIHByb3h5IGhhbmRsZXIg5a+56LGhCiAgICBjb25zdCBoYW5kbGVyID0gewogICAgICAvLyB0YXJnZXQ6IGFueSwgcHJvcDogYW55LCByZWNpdmVyOiBhbnkKICAgICAgZ2V0KHRhcmdldDogYW55LCBwcm9wOiBhbnksIHJlY2l2ZXI6IGFueSkgewogICAgICAgIGNvbnNvbGUubG9nKCJnZXQgLS0gIiwgdGFyZ2V0LCBwcm9wLCByZWNpdmVyKTsKICAgICAgICByZXR1cm4gdGFyZ2V0W3Byb3BdOwogICAgICAgIC8vIHJldHVybiBSZWZsZWN0LmdldCguLi5hcmd1bWVudHMpOwogICAgICB9LAogICAgICBzZXQodGFyZ2V0OiBhbnksIHByb3A6IGFueSwgbmV3VmFsdWU6IGFueSwgcmVjaXZlcjogYW55KSB7CiAgICAgICAgY29uc29sZS5sb2coInNldCAtLSAiLCByZWNpdmVyLCBuZXdWYWx1ZSk7CiAgICAgICAgdGFyZ2V0W3Byb3BdID0gbmV3VmFsdWU7CiAgICAgICAgcmV0dXJuIHRydWU7IC8vICDooajnpLrorr7nva7miJDlip8KICAgICAgfSwKICAgIH07CiAgICAvLyAg5Yib5bu6IHByb3h5IOWunuS+iywgIOe7keWumiBwZXJzb24g6L+b6KGM5L6m5ZCsCiAgICBjb25zdCBwcm94eSA9IG5ldyBQcm94eShwZXJzb24sIGhhbmRsZXIpOwoKICAgIGNvbnN0IGhhbmRsZXJXaXRoUmVmcyA9IHJlYWN0aXZlKHsKICAgICAgLy8gICDph43nva4gcGVyc29uCiAgICAgIHJlc2V0UGVyc29uKCkgewogICAgICAgIHBlcnNvbi5uYW1lID0gIkNoZW4geGluIjsKICAgICAgfSwKICAgICAgLy8g6K+75Y+W5bGe5oCnIHByb3h5CiAgICAgIGdldEF0dHIoKSB7CiAgICAgICAgcHJveHkubmFtZTsKICAgICAgfSwKICAgICAgLy8gIOiuvue9riBwcm94eSDlsZ7mgKc6bmFtZQogICAgICBzZXRBdHRyKG5hbWU6IHN0cmluZykgewogICAgICAgIHByb3h5Lm5hbWUgPSBuYW1lOwogICAgICAgIGNvbnNvbGUubG9nKCJwcm94eToiLCBwcm94eSwgIiBwZXJzb246IiwgcGVyc29uKTsKICAgICAgfSwKICAgIH0pOwoKICAgIHJldHVybiB7CiAgICAgIHBlcnNvbiwKICAgICAgLi4uaGFuZGxlcldpdGhSZWZzLAogICAgfTsKICB9LAp9KTsK"},{"version":3,"sources":["/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/ProxyDemo.vue"],"names":[],"mappings":"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","file":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/ProxyDemo.vue","sourceRoot":"","sourcesContent":["<!-- \n    * 深入响应式原理 Proxy\n        * handler.get\n        * handler.set\n    * 对象操作, 为 proxy 量身定做\n        Reflect.get(target, PropertyKey, receiver)\n        Reflect.set(target, PropertyKey, newValue, receiver)\n-->\n<template>\n  <div class=\"proxy-demo\">\n    <span>person.name: {{ person.name }}</span> &nbsp;\n    <button @click=\"getAttr\">读取 proxy 属性</button> &nbsp;\n    <button @click=\"setAttr('chen xin')\">\n      设置 proxy 属性name 值为 chen xin\n    </button>\n    &nbsp;\n    <button @click=\"resetPerson\">重置 person name 属性</button>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive } from \"vue\";\nexport default defineComponent({\n  name: \"proxy-demo\",\n  setup() {\n    //  定义对象 person\n    const person = reactive({\n      name: \"Chen xin\",\n    });\n\n    //  Reflect.get 函数取值, Reflect.set 函数形式设置值, 为 Proxy 实例 handler 对象 量身定做\n    console.log('Reflect.get(person, \"name\") -> ', Reflect.get(person, \"name\"));\n    Reflect.set(person, \"name\", \"Chen Xin\");\n\n    //  proxy handler 对象\n    const handler = {\n      // target: any, prop: any, reciver: any\n      get(target: any, prop: any, reciver: any) {\n        console.log(\"get -- \", target, prop, reciver);\n        return target[prop];\n        // return Reflect.get(...arguments);\n      },\n      set(target: any, prop: any, newValue: any, reciver: any) {\n        console.log(\"set -- \", reciver, newValue);\n        target[prop] = newValue;\n        return true; //  表示设置成功\n      },\n    };\n    //  创建 proxy 实例,  绑定 person 进行侦听\n    const proxy = new Proxy(person, handler);\n\n    const handlerWithRefs = reactive({\n      //   重置 person\n      resetPerson() {\n        person.name = \"Chen xin\";\n      },\n      // 读取属性 proxy\n      getAttr() {\n        proxy.name;\n      },\n      //  设置 proxy 属性:name\n      setAttr(name: string) {\n        proxy.name = name;\n        console.log(\"proxy:\", proxy, \" person:\", person);\n      },\n    });\n\n    return {\n      person,\n      ...handlerWithRefs,\n    };\n  },\n});\n</script>"]}]}