{"remainingRequest":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/EffectDemo.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/EffectDemo.vue","mtime":1639029025834},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_ts-loader@8.2.0@ts-loader/index.js","mtime":499162500000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCB9IGZyb20gInZ1ZSI7CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgbmFtZTogImVmZmVjdC1kZW1vIiwKICBzZXR1cCgpIHsKICAgIC8vICDkv53lrZggZWZmZWN0IOWvueixoQogICAgY29uc3QgZGVwID0gbmV3IFNldCgpOwogICAgbGV0IHRvdGFsID0gMDsKICAgIC8vICDkuIDkuKrlia/kvZznlKgKICAgIGNvbnN0IGVmZmVjdCA9ICgpID0+IHsKICAgICAgdG90YWwgPSBwcm9kdWN0LnByaWNlICogcHJvZHVjdC5jb3VudDsKICAgIH07CiAgICAvLyAg5a2YIGVmZmVjdAogICAgZnVuY3Rpb24gdHJhY2soKSB7CiAgICAgIGRlcC5hZGQoZWZmZWN0KTsKICAgIH0KICAgIC8vICDlvqrnjq/miafooYzmiYDmnIkgZWZmZWN0CiAgICBjb25zdCB0cmlnZ2VyID0gKCkgPT4gewogICAgICBkZXAuZm9yRWFjaCgoZWZmZWN0OiBhbnkpID0+IHsKICAgICAgICBlZmZlY3QoKTsKICAgICAgfSk7CiAgICB9OwogICAgLy8gIOS+puWQrOWZqAogICAgY29uc3QgcmVhY3RpdmUgPSAob2JqOiBhbnkpID0+IHsKICAgICAgY29uc3QgaGFuZGVyID0gewogICAgICAgIGdldCh0YXJnZXQ6IGFueSwgcHJvcDogYW55LCByZXZpY2VyOiBhbnkpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCItLSBnZXQgLS0iKTsKICAgICAgICAgIHRyYWNrKCk7CiAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZXZpY2VyKTsKICAgICAgICB9LAogICAgICAgIHNldCh0YXJnZXQ6IGFueSwgcHJvcDogYW55LCBuZXdWYWx1ZTogYW55LCByZXZpY2VyOiBhbnkpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCItLSBzZXQgLS0iKTsKICAgICAgICAgIFJlZmxlY3Quc2V0KHRhcmdldCwgcHJvcCwgbmV3VmFsdWUsIHJldmljZXIpOwogICAgICAgICAgdHJpZ2dlcigpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSwKICAgICAgfTsKICAgICAgcmV0dXJuIG5ldyBQcm94eShvYmosIGhhbmRlcik7CiAgICB9OwogICAgLy8gIOafkOS4quiiq+S+puWQrOWZqOS+puWQrOeahOS6p+WTgQogICAgbGV0IHByb2R1Y3QgPSByZWFjdGl2ZSh7CiAgICAgIHByaWNlOiA1LAogICAgICBjb3VudDogMiwKICAgIH0pOwogICAgLy8gIOS+puWQrCBnZXQsIOaUtumbhiBlZmZlY3QKICAgIGVmZmVjdCgpOwogICAgY29uc29sZS5sb2codG90YWwpOwogICAgLy8gIOS6p+WTgeWxnuaAp+WPkeeUn+WPmOWMliwg6Kem5Y+RIHNldAogICAgcHJvZHVjdC5wcmljZSA9IDEwOwogICAgLy8gIOmHjeaWsOiOt+WPluWAvCwg5Y+R6YCB5ZON5bqU5Zyw5pS55Y+YCiAgICBjb25zb2xlLmxvZyh0b3RhbCk7CiAgfSwKfSk7Cg=="},{"version":3,"sources":["/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/EffectDemo.vue"],"names":[],"mappings":"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","file":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/EffectDemo.vue","sourceRoot":"","sourcesContent":["<!--\n    深入响应式对象\n        * 保存 effect\n        * 检测变化\n        * 触发 trigger effect\n-->\n<template>\n  <div class=\"effect-demo\">深入响应式对象, 控制台查看打印</div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n  name: \"effect-demo\",\n  setup() {\n    //  保存 effect 对象\n    const dep = new Set();\n    let total = 0;\n    //  一个副作用\n    const effect = () => {\n      total = product.price * product.count;\n    };\n    //  存 effect\n    function track() {\n      dep.add(effect);\n    }\n    //  循环执行所有 effect\n    const trigger = () => {\n      dep.forEach((effect: any) => {\n        effect();\n      });\n    };\n    //  侦听器\n    const reactive = (obj: any) => {\n      const hander = {\n        get(target: any, prop: any, revicer: any) {\n          console.log(\"-- get --\");\n          track();\n          return Reflect.get(target, prop, revicer);\n        },\n        set(target: any, prop: any, newValue: any, revicer: any) {\n          console.log(\"-- set --\");\n          Reflect.set(target, prop, newValue, revicer);\n          trigger();\n          return true;\n        },\n      };\n      return new Proxy(obj, hander);\n    };\n    //  某个被侦听器侦听的产品\n    let product = reactive({\n      price: 5,\n      count: 2,\n    });\n    //  侦听 get, 收集 effect\n    effect();\n    console.log(total);\n    //  产品属性发生变化, 触发 set\n    product.price = 10;\n    //  重新获取值, 发送响应地改变\n    console.log(total);\n  },\n});\n</script>"]}]}