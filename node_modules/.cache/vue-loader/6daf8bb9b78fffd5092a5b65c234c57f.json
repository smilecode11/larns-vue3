{"remainingRequest":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/WatchEffectDemo.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/WatchEffectDemo.vue","mtime":1639034716118},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_ts-loader@8.2.0@ts-loader/index.js","mtime":499162500000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCwgd2F0Y2hFZmZlY3QsIHJlZiB9IGZyb20gInZ1ZSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgcHJvcHM6IFsibXNnIl0sCiAgc2V0dXAocHJvcHM6IGFueSkgewogICAgY29uc29sZS5sb2coInNldHVwIHByb3BzOiIsIHByb3BzKTsKCiAgICBjb25zdCBjb3VudCA9IHJlZigxKTsKCiAgICBjb25zdCBub2RlID0gcmVmPG51bGwgfCBIVE1MRWxlbWVudD4obnVsbCk7CgogICAgLy8gIHdhdGNoRWZmZWN0OiAq5pm66IO955uR5ZCs5Ymv5L2c55SoCiAgICAvLyAg5Y+q5pyJ57yW5YaZ5ZyoIHdhdGNoRWZmZWN0IOS4reWPmOmHjywg5omN5Lya6KKr55uR5ZCs5bm25omn6KGM5Ymv5L2c55SoCiAgICB3YXRjaEVmZmVjdCgKICAgICAgKG9uSW52YWxpZGF0ZSkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCItIHByb3BzIGVmZmVjdCAtIiwgcHJvcHMubXNnKTsKICAgICAgICBjb25zb2xlLmxvZygiLSBpbm5lciBlZmZlY3QgLSIsIGNvdW50LnZhbHVlKTsKCiAgICAgICAgLy8jcmVnaW9uIOWJr+S9nOeUqOmrmOe6p+eUqOazlToKICAgICAgICAvLyAgICDlpJrmrKHmiafooYwsIOa4hemZpOacqui/lOWbnueahOivt+axggogICAgICAgIGNvbnN0IHNvdXJjZSA9IGF4aW9zLkNhbmNlbFRva2VuLnNvdXJjZSgpOwogICAgICAgIGF4aW9zCiAgICAgICAgICAuZ2V0KGBodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vdG9kb3MvJHtjb3VudC52YWx1ZX1gLCB7CiAgICAgICAgICAgIGNhbmNlbFRva2VuOiBzb3VyY2UudG9rZW4sCiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpOwogICAgICAgICAgfSk7CiAgICAgICAgLy8gIOWcqOivpeWbnuiwg+S4ree7iOatouacqui/lOWbnueahOaOpeWPo+e7p+e7reivt+axggogICAgICAgIG9uSW52YWxpZGF0ZSgoKSA9PiB7CiAgICAgICAgICBzb3VyY2UuY2FuY2VsKCJ0cmlnZ2VyIik7CiAgICAgICAgfSk7CiAgICAgICAgLy8jZW5kcmVnaW9uIOWJr+S9nOeUqOmrmOe6p+eUqOazlQoKICAgICAgICAvLyNyZWdpb24g5omn6KGM6aG65bqPCiAgICAgICAgLy8gICAgd2F0Y2hFZmZlY3Qg6buY6K6k5omn6KGM5piv5ZyoIGRvbSDmuLLmn5PkuYvliY0KICAgICAgICBjb25zdCBjdXJyZW50Tm9kZSA9IG5vZGUudmFsdWUgPyBub2RlLnZhbHVlLmlubmVySFRNTCA6ICIiOwogICAgICAgIGNvbnNvbGUubG9nKCItIGN1cnJlbnROb2RlIC0iLCBjdXJyZW50Tm9kZSk7CiAgICAgICAgLy8jZW5kcmVnaW9uIOaJp+ihjOmhuuW6jwogICAgICB9LAogICAgICB7CiAgICAgICAgZmx1c2g6ICJwb3N0IiwKICAgICAgICAvLyDpu5jorqQg5LmL5YmNIC0+IHByZSwg5LmL5ZCOIC0+IHBvc3QKICAgICAgfQogICAgKTsKCiAgICByZXR1cm4gewogICAgICBjb3VudCwKICAgICAgbm9kZSwKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgLy8gY29uc29sZS5sb2codGhpcy4kZW1pdCk7CiAgICBjb25zdCBzdG9wID0gd2F0Y2hFZmZlY3QoKCkgPT4gewogICAgICBjb25zb2xlLmxvZygiLSBtb3VudGVkIHdhdGNoRWZmZWN0IGNvdW50IC0iLCB0aGlzLmNvdW50KTsKICAgIH0pOwogICAgLy8gIOmUgOavgeivpeWJr+S9nOeUqAogICAgc3RvcCgpOwogIH0sCn0pOwo="},{"version":3,"sources":["/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/WatchEffectDemo.vue"],"names":[],"mappings":"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","file":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/WatchEffectDemo.vue","sourceRoot":"","sourcesContent":["<!--\n    watchEffect\n        * 智能监听, 自动收集依赖并且触发\n        * 自动销毁 effect\n        * 使副作用失效\n        * 副作用执行顺序\n-->\n<template>\n  <div class=\"watch-effect-demo\">\n    <span ref=\"node\">watch effect props.msg : {{ msg }}</span> &nbsp;\n    <button @click=\"$emit('onHandleChangeWatchEffectMsg', 'hello ~')\">\n      change person msg</button\n    >&nbsp;\n    <button\n      @click=\"$emit('onHandleChangeWatchEffectMsg', 'hello, watchEffect!')\"\n    >\n      reset person msg\n    </button>\n    <br />\n    <span>watch effect inner count: {{ count }}</span> &nbsp;\n    <button @click=\"count++\">change count</button>\n    <hr />\n    <div>\n      watchEffect 高级用法: watchEffect 函数参数(也是一个回调函数), 函数执行.\n      查看 console 及network\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, watchEffect, ref } from \"vue\";\nimport axios from \"axios\";\nexport default defineComponent({\n  props: [\"msg\"],\n  setup(props: any) {\n    console.log(\"setup props:\", props);\n\n    const count = ref(1);\n\n    const node = ref<null | HTMLElement>(null);\n\n    //  watchEffect: *智能监听副作用\n    //  只有编写在 watchEffect 中变量, 才会被监听并执行副作用\n    watchEffect(\n      (onInvalidate) => {\n        console.log(\"- props effect -\", props.msg);\n        console.log(\"- inner effect -\", count.value);\n\n        //#region 副作用高级用法:\n        //    多次执行, 清除未返回的请求\n        const source = axios.CancelToken.source();\n        axios\n          .get(`https://jsonplaceholder.typicode.com/todos/${count.value}`, {\n            cancelToken: source.token,\n          })\n          .catch((err) => {\n            console.log(err.message);\n          });\n        //  在该回调中终止未返回的接口继续请求\n        onInvalidate(() => {\n          source.cancel(\"trigger\");\n        });\n        //#endregion 副作用高级用法\n\n        //#region 执行顺序\n        //    watchEffect 默认执行是在 dom 渲染之前\n        const currentNode = node.value ? node.value.innerHTML : \"\";\n        console.log(\"- currentNode -\", currentNode);\n        //#endregion 执行顺序\n      },\n      {\n        flush: \"post\",\n        // 默认 之前 -> pre, 之后 -> post\n      }\n    );\n\n    return {\n      count,\n      node,\n    };\n  },\n  mounted() {\n    // console.log(this.$emit);\n    const stop = watchEffect(() => {\n      console.log(\"- mounted watchEffect count -\", this.count);\n    });\n    //  销毁该副作用\n    stop();\n  },\n});\n</script>"]}]}