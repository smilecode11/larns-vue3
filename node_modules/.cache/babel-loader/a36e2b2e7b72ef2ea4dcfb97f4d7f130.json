{"remainingRequest":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/templateLoader.js??ref--6!/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/WatchEffectDemo.vue?vue&type=template&id=27e9d47a","dependencies":[{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/WatchEffectDemo.vue","mtime":1639034716118},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/babel.config.js","mtime":1638948676854},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdG9EaXNwbGF5U3RyaW5nIGFzIF90b0Rpc3BsYXlTdHJpbmcsIGNyZWF0ZUVsZW1lbnRWTm9kZSBhcyBfY3JlYXRlRWxlbWVudFZOb2RlLCBjcmVhdGVUZXh0Vk5vZGUgYXMgX2NyZWF0ZVRleHRWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrIH0gZnJvbSAidnVlIjsKdmFyIF9ob2lzdGVkXzEgPSB7CiAgY2xhc3M6ICJ3YXRjaC1lZmZlY3QtZGVtbyIKfTsKCnZhciBfaG9pc3RlZF8yID0gLyojX19QVVJFX18qL19jcmVhdGVUZXh0Vk5vZGUoIiDCoCAiKTsKCnZhciBfaG9pc3RlZF8zID0gLyojX19QVVJFX18qL19jcmVhdGVUZXh0Vk5vZGUoIsKgICIpOwoKdmFyIF9ob2lzdGVkXzQgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiYnIiLCBudWxsLCBudWxsLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfNSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCIgwqAgIik7Cgp2YXIgX2hvaXN0ZWRfNiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJociIsIG51bGwsIG51bGwsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF83ID0gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIG51bGwsICIgd2F0Y2hFZmZlY3Qg6auY57qn55So5rOVOiB3YXRjaEVmZmVjdCDlh73mlbDlj4LmlbAo5Lmf5piv5LiA5Liq5Zue6LCD5Ye95pWwKSwg5Ye95pWw5omn6KGMLiDmn6XnnIsgY29uc29sZSDlj4puZXR3b3JrICIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlKSB7CiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCB7CiAgICByZWY6ICJub2RlIgogIH0sICJ3YXRjaCBlZmZlY3QgcHJvcHMubXNnIDogIiArIF90b0Rpc3BsYXlTdHJpbmcoX2N0eC5tc2cpLCA1MTMKICAvKiBURVhULCBORUVEX1BBVENIICovCiAgKSwgX2hvaXN0ZWRfMiwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiYnV0dG9uIiwgewogICAgb25DbGljazogX2NhY2hlWzBdIHx8IChfY2FjaGVbMF0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiBfY3R4LiRlbWl0KCdvbkhhbmRsZUNoYW5nZVdhdGNoRWZmZWN0TXNnJywgJ2hlbGxvIH4nKTsKICAgIH0pCiAgfSwgIiBjaGFuZ2UgcGVyc29uIG1zZyIpLCBfaG9pc3RlZF8zLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJidXR0b24iLCB7CiAgICBvbkNsaWNrOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuIF9jdHguJGVtaXQoJ29uSGFuZGxlQ2hhbmdlV2F0Y2hFZmZlY3RNc2cnLCAnaGVsbG8sIHdhdGNoRWZmZWN0IScpOwogICAgfSkKICB9LCAiIHJlc2V0IHBlcnNvbiBtc2cgIiksIF9ob2lzdGVkXzQsIF9jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBudWxsLCAid2F0Y2ggZWZmZWN0IGlubmVyIGNvdW50OiAiICsgX3RvRGlzcGxheVN0cmluZyhfY3R4LmNvdW50KSwgMQogIC8qIFRFWFQgKi8KICApLCBfaG9pc3RlZF81LCBfY3JlYXRlRWxlbWVudFZOb2RlKCJidXR0b24iLCB7CiAgICBvbkNsaWNrOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuIF9jdHguY291bnQrKzsKICAgIH0pCiAgfSwgImNoYW5nZSBjb3VudCIpLCBfaG9pc3RlZF82LCBfaG9pc3RlZF83XSk7Cn0="},{"version":3,"sources":["/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/WatchEffectDemo.vue"],"names":[],"mappings":";;AAQO,EAAA,KAAK,EAAC;;;+CACiD,K;;+CAGzD,I;;8BAMD,mBAAA,CAAM,IAAN,EAAM,IAAN,EAAM,IAAN,EAAM,CAAA;AAAA;AAAN,C;;+CACkD,K;;8BAElD,mBAAA,CAAM,IAAN,EAAM,IAAN,EAAM,IAAN,EAAM,CAAA;AAAA;AAAN,C;;8BACA,mBAAA,CAGM,KAHN,EAGM,IAHN,EAAK,2EAAL,EAGA,CAAA;AAAA;AAHA,C;;;uBAdF,mBAAA,CAkBM,KAlBN,EAAA,UAAA,EAkBM,CAjBJ,mBAAA,CAA0D,MAA1D,EAA0D;AAApD,IAAA,GAAG,EAAC;AAAgD,GAA1D,EAAiB,8BAAyB,gBAAA,CAAG,IAAA,CAAA,GAAH,CAA1C,EAAgD;AAAA;AAAhD,GAiBI,E,UAAA,EAhBJ,mBAAA,CAEC,QAFD,EAEC;AAFQ,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,UAAA,MAAA;AAAA,aAAE,IAAA,CAAA,KAAA,CAAK,8BAAL,EAAK,SAAL,CAAF;AAAA,KAAA;AAEb,GAFD,EAAkE,oBAAlE,CAgBI,E,UAAA,EAbJ,mBAAA,CAIS,QAJT,EAIS;AAHN,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,UAAA,MAAA;AAAA,aAAE,IAAA,CAAA,KAAA,CAAK,8BAAL,EAAK,qBAAL,CAAF;AAAA,KAAA;AAGC,GAJT,EAEC,oBAFD,CAaI,EARJ,UAQI,EAPJ,mBAAA,CAAkD,MAAlD,EAAkD,IAAlD,EAAM,+BAA0B,gBAAA,CAAG,IAAA,CAAA,KAAH,CAAhC,EAAwC;AAAA;AAAxC,GAOI,E,UAAA,EANJ,mBAAA,CAA8C,QAA9C,EAA8C;AAArC,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,UAAA,MAAA;AAAA,aAAE,IAAA,CAAA,KAAA,EAAF;AAAA,KAAA;AAAgC,GAA9C,EAAyB,cAAzB,CAMI,EALJ,UAKI,EAJJ,UAII,CAlBN,C","sourcesContent":["<!--\n    watchEffect\n        * 智能监听, 自动收集依赖并且触发\n        * 自动销毁 effect\n        * 使副作用失效\n        * 副作用执行顺序\n-->\n<template>\n  <div class=\"watch-effect-demo\">\n    <span ref=\"node\">watch effect props.msg : {{ msg }}</span> &nbsp;\n    <button @click=\"$emit('onHandleChangeWatchEffectMsg', 'hello ~')\">\n      change person msg</button\n    >&nbsp;\n    <button\n      @click=\"$emit('onHandleChangeWatchEffectMsg', 'hello, watchEffect!')\"\n    >\n      reset person msg\n    </button>\n    <br />\n    <span>watch effect inner count: {{ count }}</span> &nbsp;\n    <button @click=\"count++\">change count</button>\n    <hr />\n    <div>\n      watchEffect 高级用法: watchEffect 函数参数(也是一个回调函数), 函数执行.\n      查看 console 及network\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, watchEffect, ref } from \"vue\";\nimport axios from \"axios\";\nexport default defineComponent({\n  props: [\"msg\"],\n  setup(props: any) {\n    console.log(\"setup props:\", props);\n\n    const count = ref(1);\n\n    const node = ref<null | HTMLElement>(null);\n\n    //  watchEffect: *智能监听副作用\n    //  只有编写在 watchEffect 中变量, 才会被监听并执行副作用\n    watchEffect(\n      (onInvalidate) => {\n        console.log(\"- props effect -\", props.msg);\n        console.log(\"- inner effect -\", count.value);\n\n        //#region 副作用高级用法:\n        //    多次执行, 清除未返回的请求\n        const source = axios.CancelToken.source();\n        axios\n          .get(`https://jsonplaceholder.typicode.com/todos/${count.value}`, {\n            cancelToken: source.token,\n          })\n          .catch((err) => {\n            console.log(err.message);\n          });\n        //  在该回调中终止未返回的接口继续请求\n        onInvalidate(() => {\n          source.cancel(\"trigger\");\n        });\n        //#endregion 副作用高级用法\n\n        //#region 执行顺序\n        //    watchEffect 默认执行是在 dom 渲染之前\n        const currentNode = node.value ? node.value.innerHTML : \"\";\n        console.log(\"- currentNode -\", currentNode);\n        //#endregion 执行顺序\n      },\n      {\n        flush: \"post\",\n        // 默认 之前 -> pre, 之后 -> post\n      }\n    );\n\n    return {\n      count,\n      node,\n    };\n  },\n  mounted() {\n    // console.log(this.$emit);\n    const stop = watchEffect(() => {\n      console.log(\"- mounted watchEffect count -\", this.count);\n    });\n    //  销毁该副作用\n    stop();\n  },\n});\n</script>"],"sourceRoot":""}]}