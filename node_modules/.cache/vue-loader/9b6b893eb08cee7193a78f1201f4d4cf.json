{"remainingRequest":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/EffectDemo.vue?vue&type=template&id=f1952978","dependencies":[{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/EffectDemo.vue","mtime":1639029025834},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdiBjbGFzcz0iZWZmZWN0LWRlbW8iPua3seWFpeWTjeW6lOW8j+WvueixoSwg5o6n5Yi25Y+w5p+l55yL5omT5Y2wPC9kaXY+Cg=="},{"version":3,"sources":["/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/EffectDemo.vue"],"names":[],"mappings":";EAOE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/EffectDemo.vue","sourceRoot":"","sourcesContent":["<!--\n    深入响应式对象\n        * 保存 effect\n        * 检测变化\n        * 触发 trigger effect\n-->\n<template>\n  <div class=\"effect-demo\">深入响应式对象, 控制台查看打印</div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n  name: \"effect-demo\",\n  setup() {\n    //  保存 effect 对象\n    const dep = new Set();\n    let total = 0;\n    //  一个副作用\n    const effect = () => {\n      total = product.price * product.count;\n    };\n    //  存 effect\n    function track() {\n      dep.add(effect);\n    }\n    //  循环执行所有 effect\n    const trigger = () => {\n      dep.forEach((effect: any) => {\n        effect();\n      });\n    };\n    //  侦听器\n    const reactive = (obj: any) => {\n      const hander = {\n        get(target: any, prop: any, revicer: any) {\n          console.log(\"-- get --\");\n          track();\n          return Reflect.get(target, prop, revicer);\n        },\n        set(target: any, prop: any, newValue: any, revicer: any) {\n          console.log(\"-- set --\");\n          Reflect.set(target, prop, newValue, revicer);\n          trigger();\n          return true;\n        },\n      };\n      return new Proxy(obj, hander);\n    };\n    //  某个被侦听器侦听的产品\n    let product = reactive({\n      price: 5,\n      count: 2,\n    });\n    //  侦听 get, 收集 effect\n    effect();\n    console.log(total);\n    //  产品属性发生变化, 触发 set\n    product.price = 10;\n    //  重新获取值, 发送响应地改变\n    console.log(total);\n  },\n});\n</script>"]}]}