{"remainingRequest":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/WatchEffectDemo.vue?vue&type=template&id=27e9d47a","dependencies":[{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/WatchEffectDemo.vue","mtime":1639034716118},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdiBjbGFzcz0id2F0Y2gtZWZmZWN0LWRlbW8iPgogICAgPHNwYW4gcmVmPSJub2RlIj53YXRjaCBlZmZlY3QgcHJvcHMubXNnIDoge3sgbXNnIH19PC9zcGFuPiAmbmJzcDsKICAgIDxidXR0b24gQGNsaWNrPSIkZW1pdCgnb25IYW5kbGVDaGFuZ2VXYXRjaEVmZmVjdE1zZycsICdoZWxsbyB+JykiPgogICAgICBjaGFuZ2UgcGVyc29uIG1zZzwvYnV0dG9uCiAgICA+Jm5ic3A7CiAgICA8YnV0dG9uCiAgICAgIEBjbGljaz0iJGVtaXQoJ29uSGFuZGxlQ2hhbmdlV2F0Y2hFZmZlY3RNc2cnLCAnaGVsbG8sIHdhdGNoRWZmZWN0IScpIgogICAgPgogICAgICByZXNldCBwZXJzb24gbXNnCiAgICA8L2J1dHRvbj4KICAgIDxiciAvPgogICAgPHNwYW4+d2F0Y2ggZWZmZWN0IGlubmVyIGNvdW50OiB7eyBjb3VudCB9fTwvc3Bhbj4gJm5ic3A7CiAgICA8YnV0dG9uIEBjbGljaz0iY291bnQrKyI+Y2hhbmdlIGNvdW50PC9idXR0b24+CiAgICA8aHIgLz4KICAgIDxkaXY+CiAgICAgIHdhdGNoRWZmZWN0IOmrmOe6p+eUqOazlTogd2F0Y2hFZmZlY3Qg5Ye95pWw5Y+C5pWwKOS5n+aYr+S4gOS4quWbnuiwg+WHveaVsCksIOWHveaVsOaJp+ihjC4KICAgICAg5p+l55yLIGNvbnNvbGUg5Y+KbmV0d29yawogICAgPC9kaXY+CiAgPC9kaXY+Cg=="},{"version":3,"sources":["/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/WatchEffectDemo.vue"],"names":[],"mappings":";EAQE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IAChE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MAC/D,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACtE;MACE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACR,CAAC,CAAC,EAAE,CAAC;IACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACxD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7C,CAAC,CAAC,EAAE,CAAC;IACL,CAAC,CAAC,CAAC,CAAC;MACF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MAClD,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACpB,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/wupeng/Desktop/projects-study/learns/learn-vue3/learn-vue3_p2/src/components/WatchEffectDemo.vue","sourceRoot":"","sourcesContent":["<!--\n    watchEffect\n        * 智能监听, 自动收集依赖并且触发\n        * 自动销毁 effect\n        * 使副作用失效\n        * 副作用执行顺序\n-->\n<template>\n  <div class=\"watch-effect-demo\">\n    <span ref=\"node\">watch effect props.msg : {{ msg }}</span> &nbsp;\n    <button @click=\"$emit('onHandleChangeWatchEffectMsg', 'hello ~')\">\n      change person msg</button\n    >&nbsp;\n    <button\n      @click=\"$emit('onHandleChangeWatchEffectMsg', 'hello, watchEffect!')\"\n    >\n      reset person msg\n    </button>\n    <br />\n    <span>watch effect inner count: {{ count }}</span> &nbsp;\n    <button @click=\"count++\">change count</button>\n    <hr />\n    <div>\n      watchEffect 高级用法: watchEffect 函数参数(也是一个回调函数), 函数执行.\n      查看 console 及network\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, watchEffect, ref } from \"vue\";\nimport axios from \"axios\";\nexport default defineComponent({\n  props: [\"msg\"],\n  setup(props: any) {\n    console.log(\"setup props:\", props);\n\n    const count = ref(1);\n\n    const node = ref<null | HTMLElement>(null);\n\n    //  watchEffect: *智能监听副作用\n    //  只有编写在 watchEffect 中变量, 才会被监听并执行副作用\n    watchEffect(\n      (onInvalidate) => {\n        console.log(\"- props effect -\", props.msg);\n        console.log(\"- inner effect -\", count.value);\n\n        //#region 副作用高级用法:\n        //    多次执行, 清除未返回的请求\n        const source = axios.CancelToken.source();\n        axios\n          .get(`https://jsonplaceholder.typicode.com/todos/${count.value}`, {\n            cancelToken: source.token,\n          })\n          .catch((err) => {\n            console.log(err.message);\n          });\n        //  在该回调中终止未返回的接口继续请求\n        onInvalidate(() => {\n          source.cancel(\"trigger\");\n        });\n        //#endregion 副作用高级用法\n\n        //#region 执行顺序\n        //    watchEffect 默认执行是在 dom 渲染之前\n        const currentNode = node.value ? node.value.innerHTML : \"\";\n        console.log(\"- currentNode -\", currentNode);\n        //#endregion 执行顺序\n      },\n      {\n        flush: \"post\",\n        // 默认 之前 -> pre, 之后 -> post\n      }\n    );\n\n    return {\n      count,\n      node,\n    };\n  },\n  mounted() {\n    // console.log(this.$emit);\n    const stop = watchEffect(() => {\n      console.log(\"- mounted watchEffect count -\", this.count);\n    });\n    //  销毁该副作用\n    stop();\n  },\n});\n</script>"]}]}